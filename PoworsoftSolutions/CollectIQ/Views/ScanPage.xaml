<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="CollectIQ.Views.ScanPage"
             BackgroundColor="#05080D"
             Title="Scan Card">

    <Grid RowDefinitions="*,Auto">

        <!-- Live Camera Feed -->
        <toolkit:CameraView
            x:Name="CameraView"
            Grid.Row="0"
            HorizontalOptions="Center"
            VerticalOptions="Center"
            WidthRequest="340"
            HeightRequest="400"
            BackgroundColor="Black"
            CameraFlashMode="Off"
            MediaCaptured="Camera_MediaCaptured"
            Margin="20" />

        <!-- Animated Scan Line Overlay -->
        <BoxView x:Name="ScanLine"
                 HeightRequest="3"
                 BackgroundColor="#00FF88"
                 Opacity="0.9"
                 VerticalOptions="Start"
                 HorizontalOptions="FillAndExpand"
                 Margin="30,0,30,0"/>

        <!-- Bottom Controls -->
        <Grid Grid.Row="1"
              Padding="0,20,0,25"
              RowDefinitions="Auto,Auto"
              ColumnDefinitions="*,*">

            <!-- Capture Button -->
            <Button x:Name="ScanButton"
                    Grid.ColumnSpan="2"
                    Clicked="OnScanClicked"
                    BackgroundColor="Transparent"
                    BorderColor="#00FF88"
                    BorderWidth="4"
                    WidthRequest="88"
                    HeightRequest="88"
                    CornerRadius="44"
                    HorizontalOptions="Center"
                    VerticalOptions="End">
                <Button.Shadow>
                    <Shadow Brush="#00FF88" Radius="25" />
                </Button.Shadow>
            </Button>

            <!-- Manual Entry Button -->
            <Button x:Name="ManualButton"
                    Text="Add Manually"
                    Grid.Row="1"
                    Grid.Column="0"
                    BackgroundColor="#001020"
                    TextColor="#6CD4FF"
                    CornerRadius="12"
                    HeightRequest="50"
                    Clicked="OnAddManuallyClicked"
                    Margin="0,20,0,0" />

            <!-- Status Label -->
            <Label x:Name="ResultLabel"
                   Text="Ready to scan..."
                   FontSize="16"
                   Grid.Row="1"
                   Grid.Column="1"
                   TextColor="#A8EFFF"
                   VerticalOptions="Center"
                   HorizontalOptions="End" />
        </Grid>
    </Grid>
</ContentPage>
